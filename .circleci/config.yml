version: 2.1

jobs:
  run-aws:
    docker:
      - image: amazon/aws-cli
    steps:
      - run:
          command: aws help > file.txt
      - save_cache:
          key: mysavedoutput
          paths:
            - ~/file.txt

  test-caching:
    docker:
      - image: amazon/aws-cli
    steps:
      - restore_cache:
          keys:
            - mysavedoutput
      - run:
        command: cat ~/file.txt

workflows:
  workflow-X:
    jobs:
      - run-aws
      - test-caching:
          requires:
            - run-aws